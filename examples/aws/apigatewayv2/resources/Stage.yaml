$token: aws:apigatewayv2/stage:Stage
properties:
  accessLogSettings:
    $ref: "#/types/aws:apigatewayv2/StageAccessLogSettings:StageAccessLogSettings"
    description: |
      Settings for logging access in this stage.
      Use the `aws.apigateway.Account` resource to configure [permissions for CloudWatch Logging](https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-logging.html#set-up-access-logging-permissions).
  apiId:
    type: string
    description: |
      API identifier.
  arn:
    type: string
    description: |
      ARN of the stage.
  autoDeploy:
    type: boolean
    description: |
      Whether updates to an API automatically trigger a new deployment. Defaults to `false`. Applicable for HTTP APIs.
  clientCertificateId:
    type: string
    description: |
      Identifier of a client certificate for the stage. Use the `aws.apigateway.ClientCertificate` resource to configure a client certificate.
      Supported only for WebSocket APIs.
  defaultRouteSettings:
    $ref: "#/types/aws:apigatewayv2/StageDefaultRouteSettings:StageDefaultRouteSettings"
    description: |
      Default route settings for the stage.
  deploymentId:
    type: string
    description: |
      Deployment identifier of the stage. Use the `aws.apigatewayv2.Deployment` resource to configure a deployment.
  description:
    type: string
    description: |
      Description for the stage. Must be less than or equal to 1024 characters in length.
  executionArn:
    type: string
    description: |
      ARN prefix to be used in an `aws.lambda.Permission`'s `source_arn` attribute.
      For WebSocket APIs this attribute can additionally be used in an `aws.iam.Policy` to authorize access to the [`@connections` API](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-how-to-call-websocket-api-connections.html).
      See the [Amazon API Gateway Developer Guide](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-websocket-control-access-iam.html) for details.
  invokeUrl:
    type: string
    description: |
      URL to invoke the API pointing to the stage,
      e.g., `wss://z4675bid1j.execute-api.eu-west-2.amazonaws.com/example-stage`, or `https://z4675bid1j.execute-api.eu-west-2.amazonaws.com/`
  name:
    type: string
    description: |
      Name of the stage. Must be between 1 and 128 characters in length.
  routeSettings:
    type: array
    items:
      $ref: "#/types/aws:apigatewayv2/StageRouteSetting:StageRouteSetting"
    description: |
      Route settings for the stage.
  stageVariables:
    type: object
    additionalProperties:
      type: string
    description: |
      Map that defines the stage variables for the stage.
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      Map of tags to assign to the stage. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
  tagsAll:
    type: object
    additionalProperties:
      type: string
    description: |
      Map of tags assigned to the resource, including those inherited from the provider `default_tags` configuration block.
required:
  - apiId
  - arn
  - deploymentId
  - executionArn
  - invokeUrl
  - name
  - tagsAll
inputProperties:
  accessLogSettings:
    $ref: "#/types/aws:apigatewayv2/StageAccessLogSettings:StageAccessLogSettings"
    description: |
      Settings for logging access in this stage.
      Use the `aws.apigateway.Account` resource to configure [permissions for CloudWatch Logging](https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-logging.html#set-up-access-logging-permissions).
  apiId:
    type: string
    description: |
      API identifier.
    willReplaceOnChanges: true
  autoDeploy:
    type: boolean
    description: |
      Whether updates to an API automatically trigger a new deployment. Defaults to `false`. Applicable for HTTP APIs.
  clientCertificateId:
    type: string
    description: |
      Identifier of a client certificate for the stage. Use the `aws.apigateway.ClientCertificate` resource to configure a client certificate.
      Supported only for WebSocket APIs.
  defaultRouteSettings:
    $ref: "#/types/aws:apigatewayv2/StageDefaultRouteSettings:StageDefaultRouteSettings"
    description: |
      Default route settings for the stage.
  deploymentId:
    type: string
    description: |
      Deployment identifier of the stage. Use the `aws.apigatewayv2.Deployment` resource to configure a deployment.
  description:
    type: string
    description: |
      Description for the stage. Must be less than or equal to 1024 characters in length.
  name:
    type: string
    description: |
      Name of the stage. Must be between 1 and 128 characters in length.
    willReplaceOnChanges: true
  routeSettings:
    type: array
    items:
      $ref: "#/types/aws:apigatewayv2/StageRouteSetting:StageRouteSetting"
    description: |
      Route settings for the stage.
  stageVariables:
    type: object
    additionalProperties:
      type: string
    description: |
      Map that defines the stage variables for the stage.
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      Map of tags to assign to the stage. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
requiredInputs:
  - apiId
stateInputs:
  description: |
    Input properties used for looking up and filtering Stage resources.
  properties:
    accessLogSettings:
      $ref: "#/types/aws:apigatewayv2/StageAccessLogSettings:StageAccessLogSettings"
      description: |
        Settings for logging access in this stage.
        Use the `aws.apigateway.Account` resource to configure [permissions for CloudWatch Logging](https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-logging.html#set-up-access-logging-permissions).
    apiId:
      type: string
      description: |
        API identifier.
      willReplaceOnChanges: true
    arn:
      type: string
      description: |
        ARN of the stage.
    autoDeploy:
      type: boolean
      description: |
        Whether updates to an API automatically trigger a new deployment. Defaults to `false`. Applicable for HTTP APIs.
    clientCertificateId:
      type: string
      description: |
        Identifier of a client certificate for the stage. Use the `aws.apigateway.ClientCertificate` resource to configure a client certificate.
        Supported only for WebSocket APIs.
    defaultRouteSettings:
      $ref: "#/types/aws:apigatewayv2/StageDefaultRouteSettings:StageDefaultRouteSettings"
      description: |
        Default route settings for the stage.
    deploymentId:
      type: string
      description: |
        Deployment identifier of the stage. Use the `aws.apigatewayv2.Deployment` resource to configure a deployment.
    description:
      type: string
      description: |
        Description for the stage. Must be less than or equal to 1024 characters in length.
    executionArn:
      type: string
      description: |
        ARN prefix to be used in an `aws.lambda.Permission`'s `source_arn` attribute.
        For WebSocket APIs this attribute can additionally be used in an `aws.iam.Policy` to authorize access to the [`@connections` API](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-how-to-call-websocket-api-connections.html).
        See the [Amazon API Gateway Developer Guide](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-websocket-control-access-iam.html) for details.
    invokeUrl:
      type: string
      description: |
        URL to invoke the API pointing to the stage,
        e.g., `wss://z4675bid1j.execute-api.eu-west-2.amazonaws.com/example-stage`, or `https://z4675bid1j.execute-api.eu-west-2.amazonaws.com/`
    name:
      type: string
      description: |
        Name of the stage. Must be between 1 and 128 characters in length.
      willReplaceOnChanges: true
    routeSettings:
      type: array
      items:
        $ref: "#/types/aws:apigatewayv2/StageRouteSetting:StageRouteSetting"
      description: |
        Route settings for the stage.
    stageVariables:
      type: object
      additionalProperties:
        type: string
      description: |
        Map that defines the stage variables for the stage.
    tags:
      type: object
      additionalProperties:
        type: string
      description: |
        Map of tags to assign to the stage. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
    tagsAll:
      type: object
      additionalProperties:
        type: string
      description: |
        Map of tags assigned to the resource, including those inherited from the provider `default_tags` configuration block.
  type: object
