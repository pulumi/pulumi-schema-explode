$token: aws:synthetics/canary:Canary
properties:
  arn:
    type: string
    description: |
      Amazon Resource Name (ARN) of the Canary.
  artifactConfig:
    $ref: "#/types/aws:synthetics/CanaryArtifactConfig:CanaryArtifactConfig"
    description: |
      configuration for canary artifacts, including the encryption-at-rest settings for artifacts that the canary uploads to Amazon S3. See Artifact Config.
  artifactS3Location:
    type: string
    description: |
      Location in Amazon S3 where Synthetics stores artifacts from the test runs of this canary.
  deleteLambda:
    type: boolean
    description: |
      Specifies whether to also delete the Lambda functions and layers used by this canary. The default is `false`.
  engineArn:
    type: string
    description: |
      ARN of the Lambda function that is used as your canary's engine.
  executionRoleArn:
    type: string
    description: |
      ARN of the IAM role to be used to run the canary. see [AWS Docs](https://docs.aws.amazon.com/AmazonSynthetics/latest/APIReference/API_CreateCanary.html#API_CreateCanary_RequestSyntax) for permissions needs for IAM Role.
  failureRetentionPeriod:
    type: integer
    description: |
      Number of days to retain data about failed runs of this canary. If you omit this field, the default of 31 days is used. The valid range is 1 to 455 days.
  handler:
    type: string
    description: |
      Entry point to use for the source code when running the canary. This value must end with the string `.handler` .
  name:
    type: string
    description: |
      Name for this canary. Has a maximum length of 21 characters. Valid characters are lowercase alphanumeric, hyphen, or underscore.
  runConfig:
    $ref: "#/types/aws:synthetics/CanaryRunConfig:CanaryRunConfig"
    description: |
      Configuration block for individual canary runs. Detailed below.
  runtimeVersion:
    type: string
    description: |
      Runtime version to use for the canary. Versions change often so consult the [Amazon CloudWatch documentation](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Synthetics_Canaries_Library.html) for the latest valid versions. Values include `syn-python-selenium-1.0`, `syn-nodejs-puppeteer-3.0`, `syn-nodejs-2.2`, `syn-nodejs-2.1`, `syn-nodejs-2.0`, and `syn-1.0`.
  s3Bucket:
    type: string
    description: |
      Full bucket name which is used if your canary script is located in S3. The bucket must already exist. Specify the full bucket name including s3:// as the start of the bucket name. **Conflicts with `zip_file`.**
  s3Key:
    type: string
    description: |
      S3 key of your script. **Conflicts with `zip_file`.**
  s3Version:
    type: string
    description: |
      S3 version ID of your script. **Conflicts with `zip_file`.**
  schedule:
    $ref: "#/types/aws:synthetics/CanarySchedule:CanarySchedule"
    description: |
      Configuration block providing how often the canary is to run and when these test runs are to stop. Detailed below.
  sourceLocationArn:
    type: string
    description: |
      ARN of the Lambda layer where Synthetics stores the canary script code.
  startCanary:
    type: boolean
    description: |
      Whether to run or stop the canary.
  status:
    type: string
    description: |
      Canary status.
  successRetentionPeriod:
    type: integer
    description: |
      Number of days to retain data about successful runs of this canary. If you omit this field, the default of 31 days is used. The valid range is 1 to 455 days.
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      Key-value map of resource tags. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
  tagsAll:
    type: object
    additionalProperties:
      type: string
    description: |
      A map of tags assigned to the resource, including those inherited from the provider `default_tags` configuration block.
  timelines:
    type: array
    items:
      $ref: "#/types/aws:synthetics/CanaryTimeline:CanaryTimeline"
    description: |
      Structure that contains information about when the canary was created, modified, and most recently run. see Timeline.
  vpcConfig:
    $ref: "#/types/aws:synthetics/CanaryVpcConfig:CanaryVpcConfig"
    description: |
      Configuration block. Detailed below.
  zipFile:
    type: string
    description: |
      ZIP file that contains the script, if you input your canary script directly into the canary instead of referring to an S3 location. It can be up to 5 MB. **Conflicts with `s3_bucket`, `s3_key`, and `s3_version`.**
required:
  - arn
  - artifactS3Location
  - engineArn
  - executionRoleArn
  - handler
  - name
  - runConfig
  - runtimeVersion
  - schedule
  - sourceLocationArn
  - status
  - tagsAll
  - timelines
inputProperties:
  artifactConfig:
    $ref: "#/types/aws:synthetics/CanaryArtifactConfig:CanaryArtifactConfig"
    description: |
      configuration for canary artifacts, including the encryption-at-rest settings for artifacts that the canary uploads to Amazon S3. See Artifact Config.
  artifactS3Location:
    type: string
    description: |
      Location in Amazon S3 where Synthetics stores artifacts from the test runs of this canary.
  deleteLambda:
    type: boolean
    description: |
      Specifies whether to also delete the Lambda functions and layers used by this canary. The default is `false`.
  executionRoleArn:
    type: string
    description: |
      ARN of the IAM role to be used to run the canary. see [AWS Docs](https://docs.aws.amazon.com/AmazonSynthetics/latest/APIReference/API_CreateCanary.html#API_CreateCanary_RequestSyntax) for permissions needs for IAM Role.
  failureRetentionPeriod:
    type: integer
    description: |
      Number of days to retain data about failed runs of this canary. If you omit this field, the default of 31 days is used. The valid range is 1 to 455 days.
  handler:
    type: string
    description: |
      Entry point to use for the source code when running the canary. This value must end with the string `.handler` .
  name:
    type: string
    description: |
      Name for this canary. Has a maximum length of 21 characters. Valid characters are lowercase alphanumeric, hyphen, or underscore.
    willReplaceOnChanges: true
  runConfig:
    $ref: "#/types/aws:synthetics/CanaryRunConfig:CanaryRunConfig"
    description: |
      Configuration block for individual canary runs. Detailed below.
  runtimeVersion:
    type: string
    description: |
      Runtime version to use for the canary. Versions change often so consult the [Amazon CloudWatch documentation](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Synthetics_Canaries_Library.html) for the latest valid versions. Values include `syn-python-selenium-1.0`, `syn-nodejs-puppeteer-3.0`, `syn-nodejs-2.2`, `syn-nodejs-2.1`, `syn-nodejs-2.0`, and `syn-1.0`.
  s3Bucket:
    type: string
    description: |
      Full bucket name which is used if your canary script is located in S3. The bucket must already exist. Specify the full bucket name including s3:// as the start of the bucket name. **Conflicts with `zip_file`.**
  s3Key:
    type: string
    description: |
      S3 key of your script. **Conflicts with `zip_file`.**
  s3Version:
    type: string
    description: |
      S3 version ID of your script. **Conflicts with `zip_file`.**
  schedule:
    $ref: "#/types/aws:synthetics/CanarySchedule:CanarySchedule"
    description: |
      Configuration block providing how often the canary is to run and when these test runs are to stop. Detailed below.
  startCanary:
    type: boolean
    description: |
      Whether to run or stop the canary.
  successRetentionPeriod:
    type: integer
    description: |
      Number of days to retain data about successful runs of this canary. If you omit this field, the default of 31 days is used. The valid range is 1 to 455 days.
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      Key-value map of resource tags. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
  vpcConfig:
    $ref: "#/types/aws:synthetics/CanaryVpcConfig:CanaryVpcConfig"
    description: |
      Configuration block. Detailed below.
  zipFile:
    type: string
    description: |
      ZIP file that contains the script, if you input your canary script directly into the canary instead of referring to an S3 location. It can be up to 5 MB. **Conflicts with `s3_bucket`, `s3_key`, and `s3_version`.**
requiredInputs:
  - artifactS3Location
  - executionRoleArn
  - handler
  - runtimeVersion
  - schedule
stateInputs:
  description: |
    Input properties used for looking up and filtering Canary resources.
  properties:
    arn:
      type: string
      description: |
        Amazon Resource Name (ARN) of the Canary.
    artifactConfig:
      $ref: "#/types/aws:synthetics/CanaryArtifactConfig:CanaryArtifactConfig"
      description: |
        configuration for canary artifacts, including the encryption-at-rest settings for artifacts that the canary uploads to Amazon S3. See Artifact Config.
    artifactS3Location:
      type: string
      description: |
        Location in Amazon S3 where Synthetics stores artifacts from the test runs of this canary.
    deleteLambda:
      type: boolean
      description: |
        Specifies whether to also delete the Lambda functions and layers used by this canary. The default is `false`.
    engineArn:
      type: string
      description: |
        ARN of the Lambda function that is used as your canary's engine.
    executionRoleArn:
      type: string
      description: |
        ARN of the IAM role to be used to run the canary. see [AWS Docs](https://docs.aws.amazon.com/AmazonSynthetics/latest/APIReference/API_CreateCanary.html#API_CreateCanary_RequestSyntax) for permissions needs for IAM Role.
    failureRetentionPeriod:
      type: integer
      description: |
        Number of days to retain data about failed runs of this canary. If you omit this field, the default of 31 days is used. The valid range is 1 to 455 days.
    handler:
      type: string
      description: |
        Entry point to use for the source code when running the canary. This value must end with the string `.handler` .
    name:
      type: string
      description: |
        Name for this canary. Has a maximum length of 21 characters. Valid characters are lowercase alphanumeric, hyphen, or underscore.
      willReplaceOnChanges: true
    runConfig:
      $ref: "#/types/aws:synthetics/CanaryRunConfig:CanaryRunConfig"
      description: |
        Configuration block for individual canary runs. Detailed below.
    runtimeVersion:
      type: string
      description: |
        Runtime version to use for the canary. Versions change often so consult the [Amazon CloudWatch documentation](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Synthetics_Canaries_Library.html) for the latest valid versions. Values include `syn-python-selenium-1.0`, `syn-nodejs-puppeteer-3.0`, `syn-nodejs-2.2`, `syn-nodejs-2.1`, `syn-nodejs-2.0`, and `syn-1.0`.
    s3Bucket:
      type: string
      description: |
        Full bucket name which is used if your canary script is located in S3. The bucket must already exist. Specify the full bucket name including s3:// as the start of the bucket name. **Conflicts with `zip_file`.**
    s3Key:
      type: string
      description: |
        S3 key of your script. **Conflicts with `zip_file`.**
    s3Version:
      type: string
      description: |
        S3 version ID of your script. **Conflicts with `zip_file`.**
    schedule:
      $ref: "#/types/aws:synthetics/CanarySchedule:CanarySchedule"
      description: |
        Configuration block providing how often the canary is to run and when these test runs are to stop. Detailed below.
    sourceLocationArn:
      type: string
      description: |
        ARN of the Lambda layer where Synthetics stores the canary script code.
    startCanary:
      type: boolean
      description: |
        Whether to run or stop the canary.
    status:
      type: string
      description: |
        Canary status.
    successRetentionPeriod:
      type: integer
      description: |
        Number of days to retain data about successful runs of this canary. If you omit this field, the default of 31 days is used. The valid range is 1 to 455 days.
    tags:
      type: object
      additionalProperties:
        type: string
      description: |
        Key-value map of resource tags. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
    tagsAll:
      type: object
      additionalProperties:
        type: string
      description: |
        A map of tags assigned to the resource, including those inherited from the provider `default_tags` configuration block.
    timelines:
      type: array
      items:
        $ref: "#/types/aws:synthetics/CanaryTimeline:CanaryTimeline"
      description: |
        Structure that contains information about when the canary was created, modified, and most recently run. see Timeline.
    vpcConfig:
      $ref: "#/types/aws:synthetics/CanaryVpcConfig:CanaryVpcConfig"
      description: |
        Configuration block. Detailed below.
    zipFile:
      type: string
      description: |
        ZIP file that contains the script, if you input your canary script directly into the canary instead of referring to an S3 location. It can be up to 5 MB. **Conflicts with `s3_bucket`, `s3_key`, and `s3_version`.**
  type: object
