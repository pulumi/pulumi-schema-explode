$token: aws:rds/clusterInstance:ClusterInstance
properties:
  applyImmediately:
    type: boolean
    description: |
      Specifies whether any database modifications
      are applied immediately, or during the next maintenance window. Default is`false`.
  arn:
    type: string
    description: |
      Amazon Resource Name (ARN) of cluster instance
  autoMinorVersionUpgrade:
    type: boolean
    description: |
      Indicates that minor engine upgrades will be applied automatically to the DB instance during the maintenance window. Default `true`.
  availabilityZone:
    type: string
    description: |
      The EC2 Availability Zone that the DB instance is created in. See [docs](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_CreateDBInstance.html) about the details.
  caCertIdentifier:
    type: string
    description: |
      The identifier of the CA certificate for the DB instance.
  clusterIdentifier:
    type: string
    description: |
      The identifier of the `aws.rds.Cluster` in which to launch this instance.
  copyTagsToSnapshot:
    type: boolean
    description: |
      Indicates whether to copy all of the user-defined tags from the DB instance to snapshots of the DB instance. Default `false`.
  dbParameterGroupName:
    type: string
    description: |
      The name of the DB parameter group to associate with this instance.
  dbSubnetGroupName:
    type: string
    description: |
      A DB subnet group to associate with this DB instance. **NOTE:** This must match the `db_subnet_group_name` of the attached `aws.rds.Cluster`.
  dbiResourceId:
    type: string
    description: |
      The region-unique, immutable identifier for the DB instance.
  endpoint:
    type: string
    description: |
      The DNS address for this instance. May not be writable
  engine:
    type: string
    $ref: "#/types/aws:rds/engineType:EngineType"
    description: |
      The name of the database engine to be used for the RDS instance. Defaults to `aurora`. Valid Values: `aurora`, `aurora-mysql`, `aurora-postgresql`.
      For information on the difference between the available Aurora MySQL engines
      see [Comparison between Aurora MySQL 1 and Aurora MySQL 2](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/AuroraMySQL.Updates.20180206.html)
      in the Amazon RDS User Guide.
  engineVersion:
    type: string
    description: |
      The database engine version.
  engineVersionActual:
    type: string
    description: |
      The database engine version
  identifier:
    type: string
    description: |
      The indentifier for the RDS instance, if omitted, this provider will assign a random, unique identifier.
  identifierPrefix:
    type: string
    description: |
      Creates a unique identifier beginning with the specified prefix. Conflicts with `identifier`.
  instanceClass:
    type: string
    description: |
      The instance class to use. For details on CPU
      and memory, see [Scaling Aurora DB Instances](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Aurora.Managing.html). Aurora uses `db.*` instance classes/types. Please see [AWS Documentation](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.DBInstanceClass.html) for currently available instance classes and complete details.
  kmsKeyId:
    type: string
    description: |
      The ARN for the KMS encryption key if one is set to the cluster.
  monitoringInterval:
    type: integer
    description: |
      The interval, in seconds, between points when Enhanced Monitoring metrics are collected for the DB instance. To disable collecting Enhanced Monitoring metrics, specify 0. The default is 0. Valid Values: 0, 1, 5, 10, 15, 30, 60.
  monitoringRoleArn:
    type: string
    description: |
      The ARN for the IAM role that permits RDS to send
      enhanced monitoring metrics to CloudWatch Logs. You can find more information on the [AWS Documentation](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_Monitoring.html)
      what IAM permissions are needed to allow Enhanced Monitoring for RDS Instances.
  networkType:
    type: string
    description: |
      The network type of the DB instance.
  performanceInsightsEnabled:
    type: boolean
    description: |
      Specifies whether Performance Insights is enabled or not.
  performanceInsightsKmsKeyId:
    type: string
    description: |
      ARN for the KMS key to encrypt Performance Insights data. When specifying `performance_insights_kms_key_id`, `performance_insights_enabled` needs to be set to true.
  performanceInsightsRetentionPeriod:
    type: integer
    description: |
      Amount of time in days to retain Performance Insights data. Valid values are `7`, `731` (2 years) or a multiple of `31`. When specifying `performance_insights_retention_period`, `performance_insights_enabled` needs to be set to true. Defaults to '7'.
  port:
    type: integer
    description: |
      The database port
  preferredBackupWindow:
    type: string
    description: |
      The daily time range during which automated backups are created if automated backups are enabled.
      Eg: "04:00-09:00"
  preferredMaintenanceWindow:
    type: string
    description: |
      The window to perform maintenance in.
      Syntax: "ddd:hh24:mi-ddd:hh24:mi". Eg: "Mon:00:00-Mon:03:00".
  promotionTier:
    type: integer
    description: |
      Default 0. Failover Priority setting on instance level. The reader who has lower tier has higher priority to get promoted to writer.
  publiclyAccessible:
    type: boolean
    description: |
      Bool to control if instance is publicly accessible.
      Default `false`. See the documentation on [Creating DB Instances](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_CreateDBInstance.html) for more
      details on controlling this property.
  storageEncrypted:
    type: boolean
    description: |
      Specifies whether the DB cluster is encrypted.
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      A map of tags to assign to the instance. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
  tagsAll:
    type: object
    additionalProperties:
      type: string
    description: |
      A map of tags assigned to the resource, including those inherited from the provider `default_tags` configuration block.
  writer:
    type: boolean
    description: |
      Boolean indicating if this instance is writable. `False` indicates this instance is a read replica.
required:
  - applyImmediately
  - arn
  - availabilityZone
  - caCertIdentifier
  - clusterIdentifier
  - dbParameterGroupName
  - dbSubnetGroupName
  - dbiResourceId
  - endpoint
  - engineVersion
  - engineVersionActual
  - identifier
  - identifierPrefix
  - instanceClass
  - kmsKeyId
  - monitoringRoleArn
  - networkType
  - performanceInsightsEnabled
  - performanceInsightsKmsKeyId
  - performanceInsightsRetentionPeriod
  - port
  - preferredBackupWindow
  - preferredMaintenanceWindow
  - storageEncrypted
  - tagsAll
  - writer
inputProperties:
  applyImmediately:
    type: boolean
    description: |
      Specifies whether any database modifications
      are applied immediately, or during the next maintenance window. Default is`false`.
  autoMinorVersionUpgrade:
    type: boolean
    description: |
      Indicates that minor engine upgrades will be applied automatically to the DB instance during the maintenance window. Default `true`.
  availabilityZone:
    type: string
    description: |
      The EC2 Availability Zone that the DB instance is created in. See [docs](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_CreateDBInstance.html) about the details.
    willReplaceOnChanges: true
  caCertIdentifier:
    type: string
    description: |
      The identifier of the CA certificate for the DB instance.
  clusterIdentifier:
    type: string
    description: |
      The identifier of the `aws.rds.Cluster` in which to launch this instance.
    willReplaceOnChanges: true
  copyTagsToSnapshot:
    type: boolean
    description: |
      Indicates whether to copy all of the user-defined tags from the DB instance to snapshots of the DB instance. Default `false`.
  dbParameterGroupName:
    type: string
    description: |
      The name of the DB parameter group to associate with this instance.
  dbSubnetGroupName:
    type: string
    description: |
      A DB subnet group to associate with this DB instance. **NOTE:** This must match the `db_subnet_group_name` of the attached `aws.rds.Cluster`.
    willReplaceOnChanges: true
  engine:
    type: string
    $ref: "#/types/aws:rds/engineType:EngineType"
    description: |
      The name of the database engine to be used for the RDS instance. Defaults to `aurora`. Valid Values: `aurora`, `aurora-mysql`, `aurora-postgresql`.
      For information on the difference between the available Aurora MySQL engines
      see [Comparison between Aurora MySQL 1 and Aurora MySQL 2](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/AuroraMySQL.Updates.20180206.html)
      in the Amazon RDS User Guide.
    willReplaceOnChanges: true
  engineVersion:
    type: string
    description: |
      The database engine version.
  identifier:
    type: string
    description: |
      The indentifier for the RDS instance, if omitted, this provider will assign a random, unique identifier.
    willReplaceOnChanges: true
  identifierPrefix:
    type: string
    description: |
      Creates a unique identifier beginning with the specified prefix. Conflicts with `identifier`.
    willReplaceOnChanges: true
  instanceClass:
    type: string
    oneOf:
      - type: string
      - type: string
        $ref: "#/types/aws:rds/InstanceType:InstanceType"
    description: |
      The instance class to use. For details on CPU
      and memory, see [Scaling Aurora DB Instances](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Aurora.Managing.html). Aurora uses `db.*` instance classes/types. Please see [AWS Documentation](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.DBInstanceClass.html) for currently available instance classes and complete details.
  monitoringInterval:
    type: integer
    description: |
      The interval, in seconds, between points when Enhanced Monitoring metrics are collected for the DB instance. To disable collecting Enhanced Monitoring metrics, specify 0. The default is 0. Valid Values: 0, 1, 5, 10, 15, 30, 60.
  monitoringRoleArn:
    type: string
    description: |
      The ARN for the IAM role that permits RDS to send
      enhanced monitoring metrics to CloudWatch Logs. You can find more information on the [AWS Documentation](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_Monitoring.html)
      what IAM permissions are needed to allow Enhanced Monitoring for RDS Instances.
  performanceInsightsEnabled:
    type: boolean
    description: |
      Specifies whether Performance Insights is enabled or not.
  performanceInsightsKmsKeyId:
    type: string
    description: |
      ARN for the KMS key to encrypt Performance Insights data. When specifying `performance_insights_kms_key_id`, `performance_insights_enabled` needs to be set to true.
  performanceInsightsRetentionPeriod:
    type: integer
    description: |
      Amount of time in days to retain Performance Insights data. Valid values are `7`, `731` (2 years) or a multiple of `31`. When specifying `performance_insights_retention_period`, `performance_insights_enabled` needs to be set to true. Defaults to '7'.
  preferredBackupWindow:
    type: string
    description: |
      The daily time range during which automated backups are created if automated backups are enabled.
      Eg: "04:00-09:00"
  preferredMaintenanceWindow:
    type: string
    description: |
      The window to perform maintenance in.
      Syntax: "ddd:hh24:mi-ddd:hh24:mi". Eg: "Mon:00:00-Mon:03:00".
  promotionTier:
    type: integer
    description: |
      Default 0. Failover Priority setting on instance level. The reader who has lower tier has higher priority to get promoted to writer.
  publiclyAccessible:
    type: boolean
    description: |
      Bool to control if instance is publicly accessible.
      Default `false`. See the documentation on [Creating DB Instances](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_CreateDBInstance.html) for more
      details on controlling this property.
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      A map of tags to assign to the instance. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
requiredInputs:
  - clusterIdentifier
  - instanceClass
stateInputs:
  description: |
    Input properties used for looking up and filtering ClusterInstance resources.
  properties:
    applyImmediately:
      type: boolean
      description: |
        Specifies whether any database modifications
        are applied immediately, or during the next maintenance window. Default is`false`.
    arn:
      type: string
      description: |
        Amazon Resource Name (ARN) of cluster instance
    autoMinorVersionUpgrade:
      type: boolean
      description: |
        Indicates that minor engine upgrades will be applied automatically to the DB instance during the maintenance window. Default `true`.
    availabilityZone:
      type: string
      description: |
        The EC2 Availability Zone that the DB instance is created in. See [docs](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_CreateDBInstance.html) about the details.
      willReplaceOnChanges: true
    caCertIdentifier:
      type: string
      description: |
        The identifier of the CA certificate for the DB instance.
    clusterIdentifier:
      type: string
      description: |
        The identifier of the `aws.rds.Cluster` in which to launch this instance.
      willReplaceOnChanges: true
    copyTagsToSnapshot:
      type: boolean
      description: |
        Indicates whether to copy all of the user-defined tags from the DB instance to snapshots of the DB instance. Default `false`.
    dbParameterGroupName:
      type: string
      description: |
        The name of the DB parameter group to associate with this instance.
    dbSubnetGroupName:
      type: string
      description: |
        A DB subnet group to associate with this DB instance. **NOTE:** This must match the `db_subnet_group_name` of the attached `aws.rds.Cluster`.
      willReplaceOnChanges: true
    dbiResourceId:
      type: string
      description: |
        The region-unique, immutable identifier for the DB instance.
    endpoint:
      type: string
      description: |
        The DNS address for this instance. May not be writable
    engine:
      type: string
      $ref: "#/types/aws:rds/engineType:EngineType"
      description: |
        The name of the database engine to be used for the RDS instance. Defaults to `aurora`. Valid Values: `aurora`, `aurora-mysql`, `aurora-postgresql`.
        For information on the difference between the available Aurora MySQL engines
        see [Comparison between Aurora MySQL 1 and Aurora MySQL 2](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/AuroraMySQL.Updates.20180206.html)
        in the Amazon RDS User Guide.
      willReplaceOnChanges: true
    engineVersion:
      type: string
      description: |
        The database engine version.
    engineVersionActual:
      type: string
      description: |
        The database engine version
    identifier:
      type: string
      description: |
        The indentifier for the RDS instance, if omitted, this provider will assign a random, unique identifier.
      willReplaceOnChanges: true
    identifierPrefix:
      type: string
      description: |
        Creates a unique identifier beginning with the specified prefix. Conflicts with `identifier`.
      willReplaceOnChanges: true
    instanceClass:
      type: string
      oneOf:
        - type: string
        - type: string
          $ref: "#/types/aws:rds/InstanceType:InstanceType"
      description: |
        The instance class to use. For details on CPU
        and memory, see [Scaling Aurora DB Instances](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Aurora.Managing.html). Aurora uses `db.*` instance classes/types. Please see [AWS Documentation](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.DBInstanceClass.html) for currently available instance classes and complete details.
    kmsKeyId:
      type: string
      description: |
        The ARN for the KMS encryption key if one is set to the cluster.
    monitoringInterval:
      type: integer
      description: |
        The interval, in seconds, between points when Enhanced Monitoring metrics are collected for the DB instance. To disable collecting Enhanced Monitoring metrics, specify 0. The default is 0. Valid Values: 0, 1, 5, 10, 15, 30, 60.
    monitoringRoleArn:
      type: string
      description: |
        The ARN for the IAM role that permits RDS to send
        enhanced monitoring metrics to CloudWatch Logs. You can find more information on the [AWS Documentation](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_Monitoring.html)
        what IAM permissions are needed to allow Enhanced Monitoring for RDS Instances.
    networkType:
      type: string
      description: |
        The network type of the DB instance.
    performanceInsightsEnabled:
      type: boolean
      description: |
        Specifies whether Performance Insights is enabled or not.
    performanceInsightsKmsKeyId:
      type: string
      description: |
        ARN for the KMS key to encrypt Performance Insights data. When specifying `performance_insights_kms_key_id`, `performance_insights_enabled` needs to be set to true.
    performanceInsightsRetentionPeriod:
      type: integer
      description: |
        Amount of time in days to retain Performance Insights data. Valid values are `7`, `731` (2 years) or a multiple of `31`. When specifying `performance_insights_retention_period`, `performance_insights_enabled` needs to be set to true. Defaults to '7'.
    port:
      type: integer
      description: |
        The database port
    preferredBackupWindow:
      type: string
      description: |
        The daily time range during which automated backups are created if automated backups are enabled.
        Eg: "04:00-09:00"
    preferredMaintenanceWindow:
      type: string
      description: |
        The window to perform maintenance in.
        Syntax: "ddd:hh24:mi-ddd:hh24:mi". Eg: "Mon:00:00-Mon:03:00".
    promotionTier:
      type: integer
      description: |
        Default 0. Failover Priority setting on instance level. The reader who has lower tier has higher priority to get promoted to writer.
    publiclyAccessible:
      type: boolean
      description: |
        Bool to control if instance is publicly accessible.
        Default `false`. See the documentation on [Creating DB Instances](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_CreateDBInstance.html) for more
        details on controlling this property.
    storageEncrypted:
      type: boolean
      description: |
        Specifies whether the DB cluster is encrypted.
    tags:
      type: object
      additionalProperties:
        type: string
      description: |
        A map of tags to assign to the instance. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
    tagsAll:
      type: object
      additionalProperties:
        type: string
      description: |
        A map of tags assigned to the resource, including those inherited from the provider `default_tags` configuration block.
    writer:
      type: boolean
      description: |
        Boolean indicating if this instance is writable. `False` indicates this instance is a read replica.
  type: object
