$token: aws:batch/ComputeEnvironmentComputeResources:ComputeEnvironmentComputeResources
properties:
  allocationStrategy:
    type: string
    description: |
      The allocation strategy to use for the compute resource in case not enough instances of the best fitting instance type can be allocated. Valid items are `BEST_FIT_PROGRESSIVE`, `SPOT_CAPACITY_OPTIMIZED` or `BEST_FIT`. Defaults to `BEST_FIT`. See [AWS docs](https://docs.aws.amazon.com/batch/latest/userguide/allocation-strategies.html) for details. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
    language:
      python:
        mapCase: false
    willReplaceOnChanges: true
  bidPercentage:
    type: integer
    description: |
      Integer of maximum percentage that a Spot Instance price can be when compared with the On-Demand price for that instance type before instances are launched. For example, if your bid percentage is 20% (`20`), then the Spot price must be below 20% of the current On-Demand price for that EC2 instance. If you leave this field empty, the default value is 100% of the On-Demand price. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
    language:
      python:
        mapCase: false
    willReplaceOnChanges: true
  desiredVcpus:
    type: integer
    description: |
      The desired number of EC2 vCPUS in the compute environment. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
    language:
      python:
        mapCase: false
  ec2Configuration:
    $ref: "#/types/aws:batch/ComputeEnvironmentComputeResourcesEc2Configuration:ComputeEnvironmentComputeResourcesEc2Configuration"
    description: |
      Provides information used to select Amazon Machine Images (AMIs) for EC2 instances in the compute environment. If Ec2Configuration isn't specified, the default is ECS_AL2. This parameter isn't applicable to jobs that are running on Fargate resources, and shouldn't be specified.
    language:
      python:
        mapCase: false
    willReplaceOnChanges: true
  ec2KeyPair:
    type: string
    description: |
      The EC2 key pair that is used for instances launched in the compute environment. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
    language:
      python:
        mapCase: false
    willReplaceOnChanges: true
  imageId:
    type: string
    description: |
      The Amazon Machine Image (AMI) ID used for instances launched in the compute environment. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified. (Deprecated, use `ec2_configuration` `image_id_override` instead)
    language:
      python:
        mapCase: false
    willReplaceOnChanges: true
  instanceRole:
    type: string
    description: |
      The Amazon ECS instance role applied to Amazon EC2 instances in a compute environment. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
    language:
      python:
        mapCase: false
    willReplaceOnChanges: true
  instanceTypes:
    type: array
    items:
      type: string
    description: |
      A list of instance types that may be launched. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
    language:
      python:
        mapCase: false
    willReplaceOnChanges: true
  launchTemplate:
    $ref: "#/types/aws:batch/ComputeEnvironmentComputeResourcesLaunchTemplate:ComputeEnvironmentComputeResourcesLaunchTemplate"
    description: |
      The launch template to use for your compute resources. See details below. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
    language:
      python:
        mapCase: false
    willReplaceOnChanges: true
  maxVcpus:
    type: integer
    description: |
      The maximum number of EC2 vCPUs that an environment can reach.
    language:
      python:
        mapCase: false
  minVcpus:
    type: integer
    description: |
      The minimum number of EC2 vCPUs that an environment should maintain. For `EC2` or `SPOT` compute environments, if the parameter is not explicitly defined, a `0` default value will be set. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
    language:
      python:
        mapCase: false
  securityGroupIds:
    type: array
    items:
      type: string
    description: |
      A list of EC2 security group that are associated with instances launched in the compute environment.
    language:
      python:
        mapCase: false
  spotIamFleetRole:
    type: string
    description: |
      The Amazon Resource Name (ARN) of the Amazon EC2 Spot Fleet IAM role applied to a SPOT compute environment. This parameter is required for SPOT compute environments. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
    language:
      python:
        mapCase: false
    willReplaceOnChanges: true
  subnets:
    type: array
    items:
      type: string
    description: |
      A list of VPC subnets into which the compute resources are launched.
    language:
      python:
        mapCase: false
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      Key-value pair tags to be applied to resources that are launched in the compute environment. This parameter isn't applicable to jobs running on Fargate resources, and shouldn't be specified.
    language:
      python:
        mapCase: false
    willReplaceOnChanges: true
  type:
    type: string
    description: |
      The type of compute environment. Valid items are `EC2`, `SPOT`, `FARGATE` or `FARGATE_SPOT`.
    language:
      python:
        mapCase: false
    willReplaceOnChanges: true
type: object
required:
  - maxVcpus
  - securityGroupIds
  - subnets
  - type
language:
  nodejs:
    requiredOutputs:
      - desiredVcpus
      - ec2Configuration
      - maxVcpus
      - securityGroupIds
      - subnets
      - type
