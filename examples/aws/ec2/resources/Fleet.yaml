$token: aws:ec2/fleet:Fleet
properties:
  arn:
    type: string
    description: |
      The ARN of the fleet
  context:
    type: string
    description: |
      Reserved.
  excessCapacityTerminationPolicy:
    type: string
    description: |
      Whether running instances should be terminated if the total target capacity of the EC2 Fleet is decreased below the current size of the EC2. Valid values: `no-termination`, `termination`. Defaults to `termination`.
  launchTemplateConfig:
    $ref: "#/types/aws:ec2/FleetLaunchTemplateConfig:FleetLaunchTemplateConfig"
    description: |
      Nested argument containing EC2 Launch Template configurations. Defined below.
  onDemandOptions:
    $ref: "#/types/aws:ec2/FleetOnDemandOptions:FleetOnDemandOptions"
    description: |
      Nested argument containing On-Demand configurations. Defined below.
  replaceUnhealthyInstances:
    type: boolean
    description: |
      Whether EC2 Fleet should replace unhealthy instances. Defaults to `false`.
  spotOptions:
    $ref: "#/types/aws:ec2/FleetSpotOptions:FleetSpotOptions"
    description: |
      Nested argument containing Spot configurations. Defined below.
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      Map of Fleet tags. To tag instances at launch, specify the tags in the Launch Template. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
  tagsAll:
    type: object
    additionalProperties:
      type: string
    description: |
      A map of tags assigned to the resource, including those inherited from the provider `default_tags` configuration block.
  targetCapacitySpecification:
    $ref: "#/types/aws:ec2/FleetTargetCapacitySpecification:FleetTargetCapacitySpecification"
    description: |
      Nested argument containing target capacity configurations. Defined below.
  terminateInstances:
    type: boolean
    description: |
      Whether to terminate instances for an EC2 Fleet if it is deleted successfully. Defaults to `false`.
  terminateInstancesWithExpiration:
    type: boolean
    description: |
      Whether running instances should be terminated when the EC2 Fleet expires. Defaults to `false`.
  type:
    type: string
    description: |
      The type of request. Indicates whether the EC2 Fleet only requests the target capacity, or also attempts to maintain it. Valid values: `maintain`, `request`. Defaults to `maintain`.
required:
  - arn
  - launchTemplateConfig
  - tagsAll
  - targetCapacitySpecification
inputProperties:
  context:
    type: string
    description: |
      Reserved.
  excessCapacityTerminationPolicy:
    type: string
    description: |
      Whether running instances should be terminated if the total target capacity of the EC2 Fleet is decreased below the current size of the EC2. Valid values: `no-termination`, `termination`. Defaults to `termination`.
  launchTemplateConfig:
    $ref: "#/types/aws:ec2/FleetLaunchTemplateConfig:FleetLaunchTemplateConfig"
    description: |
      Nested argument containing EC2 Launch Template configurations. Defined below.
  onDemandOptions:
    $ref: "#/types/aws:ec2/FleetOnDemandOptions:FleetOnDemandOptions"
    description: |
      Nested argument containing On-Demand configurations. Defined below.
  replaceUnhealthyInstances:
    type: boolean
    description: |
      Whether EC2 Fleet should replace unhealthy instances. Defaults to `false`.
    willReplaceOnChanges: true
  spotOptions:
    $ref: "#/types/aws:ec2/FleetSpotOptions:FleetSpotOptions"
    description: |
      Nested argument containing Spot configurations. Defined below.
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      Map of Fleet tags. To tag instances at launch, specify the tags in the Launch Template. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
  targetCapacitySpecification:
    $ref: "#/types/aws:ec2/FleetTargetCapacitySpecification:FleetTargetCapacitySpecification"
    description: |
      Nested argument containing target capacity configurations. Defined below.
  terminateInstances:
    type: boolean
    description: |
      Whether to terminate instances for an EC2 Fleet if it is deleted successfully. Defaults to `false`.
  terminateInstancesWithExpiration:
    type: boolean
    description: |
      Whether running instances should be terminated when the EC2 Fleet expires. Defaults to `false`.
    willReplaceOnChanges: true
  type:
    type: string
    description: |
      The type of request. Indicates whether the EC2 Fleet only requests the target capacity, or also attempts to maintain it. Valid values: `maintain`, `request`. Defaults to `maintain`.
    willReplaceOnChanges: true
requiredInputs:
  - launchTemplateConfig
  - targetCapacitySpecification
stateInputs:
  description: |
    Input properties used for looking up and filtering Fleet resources.
  properties:
    arn:
      type: string
      description: |
        The ARN of the fleet
    context:
      type: string
      description: |
        Reserved.
    excessCapacityTerminationPolicy:
      type: string
      description: |
        Whether running instances should be terminated if the total target capacity of the EC2 Fleet is decreased below the current size of the EC2. Valid values: `no-termination`, `termination`. Defaults to `termination`.
    launchTemplateConfig:
      $ref: "#/types/aws:ec2/FleetLaunchTemplateConfig:FleetLaunchTemplateConfig"
      description: |
        Nested argument containing EC2 Launch Template configurations. Defined below.
    onDemandOptions:
      $ref: "#/types/aws:ec2/FleetOnDemandOptions:FleetOnDemandOptions"
      description: |
        Nested argument containing On-Demand configurations. Defined below.
    replaceUnhealthyInstances:
      type: boolean
      description: |
        Whether EC2 Fleet should replace unhealthy instances. Defaults to `false`.
      willReplaceOnChanges: true
    spotOptions:
      $ref: "#/types/aws:ec2/FleetSpotOptions:FleetSpotOptions"
      description: |
        Nested argument containing Spot configurations. Defined below.
    tags:
      type: object
      additionalProperties:
        type: string
      description: |
        Map of Fleet tags. To tag instances at launch, specify the tags in the Launch Template. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
    tagsAll:
      type: object
      additionalProperties:
        type: string
      description: |
        A map of tags assigned to the resource, including those inherited from the provider `default_tags` configuration block.
    targetCapacitySpecification:
      $ref: "#/types/aws:ec2/FleetTargetCapacitySpecification:FleetTargetCapacitySpecification"
      description: |
        Nested argument containing target capacity configurations. Defined below.
    terminateInstances:
      type: boolean
      description: |
        Whether to terminate instances for an EC2 Fleet if it is deleted successfully. Defaults to `false`.
    terminateInstancesWithExpiration:
      type: boolean
      description: |
        Whether running instances should be terminated when the EC2 Fleet expires. Defaults to `false`.
      willReplaceOnChanges: true
    type:
      type: string
      description: |
        The type of request. Indicates whether the EC2 Fleet only requests the target capacity, or also attempts to maintain it. Valid values: `maintain`, `request`. Defaults to `maintain`.
      willReplaceOnChanges: true
  type: object
