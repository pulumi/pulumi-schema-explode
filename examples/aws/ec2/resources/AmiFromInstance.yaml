$token: aws:ec2/amiFromInstance:AmiFromInstance
properties:
  architecture:
    type: string
    description: |
      Machine architecture for created instances. Defaults to "x86_64".
  arn:
    type: string
    description: |
      ARN of the AMI.
  bootMode:
    type: string
    description: |
      Boot mode of the AMI. For more information, see [Boot modes](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ami-boot.html) in the Amazon Elastic Compute Cloud User Guide.
  deprecationTime:
    type: string
    description: |
      Date and time to deprecate the AMI. If you specified a value for seconds, Amazon EC2 rounds the seconds to the nearest minute. Valid values: [RFC3339 time string](https://tools.ietf.org/html/rfc3339#section-5.8) (`YYYY-MM-DDTHH:MM:SSZ`)
  description:
    type: string
    description: |
      Longer, human-readable description for the AMI.
  ebsBlockDevices:
    type: array
    items:
      $ref: "#/types/aws:ec2/AmiFromInstanceEbsBlockDevice:AmiFromInstanceEbsBlockDevice"
    description: |
      Nested block describing an EBS block device that should be
      attached to created instances. The structure of this block is described below.
  enaSupport:
    type: boolean
    description: |
      Whether enhanced networking with ENA is enabled. Defaults to `false`.
  ephemeralBlockDevices:
    type: array
    items:
      $ref: "#/types/aws:ec2/AmiFromInstanceEphemeralBlockDevice:AmiFromInstanceEphemeralBlockDevice"
    description: |
      Nested block describing an ephemeral block device that
      should be attached to created instances. The structure of this block is described below.
  hypervisor:
    type: string
  imageLocation:
    type: string
    description: |
      Path to an S3 object containing an image manifest, e.g., created
      by the `ec2-upload-bundle` command in the EC2 command line tools.
  imageOwnerAlias:
    type: string
  imageType:
    type: string
  kernelId:
    type: string
    description: |
      ID of the kernel image (AKI) that will be used as the paravirtual
      kernel in created instances.
  manageEbsSnapshots:
    type: boolean
  name:
    type: string
    description: |
      Region-unique name for the AMI.
  ownerId:
    type: string
  platform:
    type: string
  platformDetails:
    type: string
  public:
    type: boolean
  ramdiskId:
    type: string
    description: |
      ID of an initrd image (ARI) that will be used when booting the
      created instances.
  rootDeviceName:
    type: string
    description: |
      Name of the root device (for example, `/dev/sda1`, or `/dev/xvda`).
  rootSnapshotId:
    type: string
  snapshotWithoutReboot:
    type: boolean
    description: |
      Boolean that overrides the behavior of stopping
      the instance before snapshotting. This is risky since it may cause a snapshot of an
      inconsistent filesystem state, but can be used to avoid downtime if the user otherwise
      guarantees that no filesystem writes will be underway at the time of snapshot.
  sourceInstanceId:
    type: string
    description: |
      ID of the instance to use as the basis of the AMI.
  sriovNetSupport:
    type: string
    description: |
      When set to "simple" (the default), enables enhanced networking
      for created instances. No other value is supported at this time.
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      Map of tags to assign to the resource. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
  tagsAll:
    type: object
    additionalProperties:
      type: string
  tpmSupport:
    type: string
    description: |
      If the image is configured for NitroTPM support, the value is `v2.0`. For more information, see [NitroTPM](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/nitrotpm.html) in the Amazon Elastic Compute Cloud User Guide.
  usageOperation:
    type: string
  virtualizationType:
    type: string
    description: |
      Keyword to choose what virtualization mode created instances
      will use. Can be either "paravirtual" (the default) or "hvm". The choice of virtualization type
      changes the set of further arguments that are required, as described below.
required:
  - architecture
  - arn
  - bootMode
  - ebsBlockDevices
  - enaSupport
  - ephemeralBlockDevices
  - hypervisor
  - imageLocation
  - imageOwnerAlias
  - imageType
  - kernelId
  - manageEbsSnapshots
  - name
  - ownerId
  - platform
  - platformDetails
  - public
  - ramdiskId
  - rootDeviceName
  - rootSnapshotId
  - sourceInstanceId
  - sriovNetSupport
  - tagsAll
  - tpmSupport
  - usageOperation
  - virtualizationType
inputProperties:
  deprecationTime:
    type: string
    description: |
      Date and time to deprecate the AMI. If you specified a value for seconds, Amazon EC2 rounds the seconds to the nearest minute. Valid values: [RFC3339 time string](https://tools.ietf.org/html/rfc3339#section-5.8) (`YYYY-MM-DDTHH:MM:SSZ`)
  description:
    type: string
    description: |
      Longer, human-readable description for the AMI.
  ebsBlockDevices:
    type: array
    items:
      $ref: "#/types/aws:ec2/AmiFromInstanceEbsBlockDevice:AmiFromInstanceEbsBlockDevice"
    description: |
      Nested block describing an EBS block device that should be
      attached to created instances. The structure of this block is described below.
  ephemeralBlockDevices:
    type: array
    items:
      $ref: "#/types/aws:ec2/AmiFromInstanceEphemeralBlockDevice:AmiFromInstanceEphemeralBlockDevice"
    description: |
      Nested block describing an ephemeral block device that
      should be attached to created instances. The structure of this block is described below.
    willReplaceOnChanges: true
  name:
    type: string
    description: |
      Region-unique name for the AMI.
    willReplaceOnChanges: true
  snapshotWithoutReboot:
    type: boolean
    description: |
      Boolean that overrides the behavior of stopping
      the instance before snapshotting. This is risky since it may cause a snapshot of an
      inconsistent filesystem state, but can be used to avoid downtime if the user otherwise
      guarantees that no filesystem writes will be underway at the time of snapshot.
    willReplaceOnChanges: true
  sourceInstanceId:
    type: string
    description: |
      ID of the instance to use as the basis of the AMI.
    willReplaceOnChanges: true
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      Map of tags to assign to the resource. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
requiredInputs:
  - sourceInstanceId
stateInputs:
  description: |
    Input properties used for looking up and filtering AmiFromInstance resources.
  properties:
    architecture:
      type: string
      description: |
        Machine architecture for created instances. Defaults to "x86_64".
    arn:
      type: string
      description: |
        ARN of the AMI.
    bootMode:
      type: string
      description: |
        Boot mode of the AMI. For more information, see [Boot modes](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ami-boot.html) in the Amazon Elastic Compute Cloud User Guide.
    deprecationTime:
      type: string
      description: |
        Date and time to deprecate the AMI. If you specified a value for seconds, Amazon EC2 rounds the seconds to the nearest minute. Valid values: [RFC3339 time string](https://tools.ietf.org/html/rfc3339#section-5.8) (`YYYY-MM-DDTHH:MM:SSZ`)
    description:
      type: string
      description: |
        Longer, human-readable description for the AMI.
    ebsBlockDevices:
      type: array
      items:
        $ref: "#/types/aws:ec2/AmiFromInstanceEbsBlockDevice:AmiFromInstanceEbsBlockDevice"
      description: |
        Nested block describing an EBS block device that should be
        attached to created instances. The structure of this block is described below.
    enaSupport:
      type: boolean
      description: |
        Whether enhanced networking with ENA is enabled. Defaults to `false`.
    ephemeralBlockDevices:
      type: array
      items:
        $ref: "#/types/aws:ec2/AmiFromInstanceEphemeralBlockDevice:AmiFromInstanceEphemeralBlockDevice"
      description: |
        Nested block describing an ephemeral block device that
        should be attached to created instances. The structure of this block is described below.
      willReplaceOnChanges: true
    hypervisor:
      type: string
    imageLocation:
      type: string
      description: |
        Path to an S3 object containing an image manifest, e.g., created
        by the `ec2-upload-bundle` command in the EC2 command line tools.
    imageOwnerAlias:
      type: string
    imageType:
      type: string
    kernelId:
      type: string
      description: |
        ID of the kernel image (AKI) that will be used as the paravirtual
        kernel in created instances.
    manageEbsSnapshots:
      type: boolean
    name:
      type: string
      description: |
        Region-unique name for the AMI.
      willReplaceOnChanges: true
    ownerId:
      type: string
    platform:
      type: string
    platformDetails:
      type: string
    public:
      type: boolean
    ramdiskId:
      type: string
      description: |
        ID of an initrd image (ARI) that will be used when booting the
        created instances.
    rootDeviceName:
      type: string
      description: |
        Name of the root device (for example, `/dev/sda1`, or `/dev/xvda`).
    rootSnapshotId:
      type: string
    snapshotWithoutReboot:
      type: boolean
      description: |
        Boolean that overrides the behavior of stopping
        the instance before snapshotting. This is risky since it may cause a snapshot of an
        inconsistent filesystem state, but can be used to avoid downtime if the user otherwise
        guarantees that no filesystem writes will be underway at the time of snapshot.
      willReplaceOnChanges: true
    sourceInstanceId:
      type: string
      description: |
        ID of the instance to use as the basis of the AMI.
      willReplaceOnChanges: true
    sriovNetSupport:
      type: string
      description: |
        When set to "simple" (the default), enables enhanced networking
        for created instances. No other value is supported at this time.
    tags:
      type: object
      additionalProperties:
        type: string
      description: |
        Map of tags to assign to the resource. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
    tagsAll:
      type: object
      additionalProperties:
        type: string
    tpmSupport:
      type: string
      description: |
        If the image is configured for NitroTPM support, the value is `v2.0`. For more information, see [NitroTPM](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/nitrotpm.html) in the Amazon Elastic Compute Cloud User Guide.
    usageOperation:
      type: string
    virtualizationType:
      type: string
      description: |
        Keyword to choose what virtualization mode created instances
        will use. Can be either "paravirtual" (the default) or "hvm". The choice of virtualization type
        changes the set of further arguments that are required, as described below.
  type: object
