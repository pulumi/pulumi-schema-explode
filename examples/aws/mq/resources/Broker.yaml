$token: aws:mq/broker:Broker
properties:
  applyImmediately:
    type: boolean
    description: |
      Specifies whether any broker modifications are applied immediately, or during the next maintenance window. Default is `false`.
  arn:
    type: string
    description: |
      ARN of the broker.
  authenticationStrategy:
    type: string
    description: |
      Authentication strategy used to secure the broker. Valid values are `simple` and `ldap`. `ldap` is not supported for `engine_type` `RabbitMQ`.
  autoMinorVersionUpgrade:
    type: boolean
    description: |
      Whether to automatically upgrade to new minor versions of brokers as Amazon MQ makes releases available.
  brokerName:
    type: string
    description: |
      Name of the broker.
  configuration:
    $ref: "#/types/aws:mq/BrokerConfiguration:BrokerConfiguration"
    description: |
      Configuration block for broker configuration. Applies to `engine_type` of `ActiveMQ` only. Detailed below.
  deploymentMode:
    type: string
    description: |
      Deployment mode of the broker. Valid values are `SINGLE_INSTANCE`, `ACTIVE_STANDBY_MULTI_AZ`, and `CLUSTER_MULTI_AZ`. Default is `SINGLE_INSTANCE`.
  encryptionOptions:
    $ref: "#/types/aws:mq/BrokerEncryptionOptions:BrokerEncryptionOptions"
    description: |
      Configuration block containing encryption options. Detailed below.
  engineType:
    type: string
    description: |
      Type of broker engine. Valid values are `ActiveMQ` and `RabbitMQ`.
  engineVersion:
    type: string
    description: |
      Version of the broker engine. See the [AmazonMQ Broker Engine docs](https://docs.aws.amazon.com/amazon-mq/latest/developer-guide/broker-engine.html) for supported versions. For example, `5.15.0`.
  hostInstanceType:
    type: string
    description: |
      Broker's instance type. For example, `mq.t3.micro`, `mq.m5.large`.
  instances:
    type: array
    items:
      $ref: "#/types/aws:mq/BrokerInstance:BrokerInstance"
    description: |
      List of information about allocated brokers (both active & standby).
      * `instances.0.console_url` - The URL of the broker's [ActiveMQ Web Console](http://activemq.apache.org/web-console.html).
      * `instances.0.ip_address` - IP Address of the broker.
      * `instances.0.endpoints` - Broker's wire-level protocol endpoints in the following order & format referenceable e.g., as `instances.0.endpoints.0` (SSL):
      * For `ActiveMQ`:
      * `ssl://broker-id.mq.us-west-2.amazonaws.com:61617`
      * `amqp+ssl://broker-id.mq.us-west-2.amazonaws.com:5671`
      * `stomp+ssl://broker-id.mq.us-west-2.amazonaws.com:61614`
      * `mqtt+ssl://broker-id.mq.us-west-2.amazonaws.com:8883`
      * `wss://broker-id.mq.us-west-2.amazonaws.com:61619`
      * For `RabbitMQ`:
      * `amqps://broker-id.mq.us-west-2.amazonaws.com:5671`
  ldapServerMetadata:
    $ref: "#/types/aws:mq/BrokerLdapServerMetadata:BrokerLdapServerMetadata"
    description: |
      Configuration block for the LDAP server used to authenticate and authorize connections to the broker. Not supported for `engine_type` `RabbitMQ`. Detailed below. (Currently, AWS may not process changes to LDAP server metadata.)
  logs:
    $ref: "#/types/aws:mq/BrokerLogs:BrokerLogs"
    description: |
      Configuration block for the logging configuration of the broker. Detailed below.
  maintenanceWindowStartTime:
    $ref: "#/types/aws:mq/BrokerMaintenanceWindowStartTime:BrokerMaintenanceWindowStartTime"
    description: |
      Configuration block for the maintenance window start time. Detailed below.
  publiclyAccessible:
    type: boolean
    description: |
      Whether to enable connections from applications outside of the VPC that hosts the broker's subnets.
  securityGroups:
    type: array
    items:
      type: string
    description: |
      List of security group IDs assigned to the broker.
  storageType:
    type: string
    description: |
      Storage type of the broker. For `engine_type` `ActiveMQ`, the valid values are `efs` and `ebs`, and the AWS-default is `efs`. For `engine_type` `RabbitMQ`, only `ebs` is supported. When using `ebs`, only the `mq.m5` broker instance type family is supported.
  subnetIds:
    type: array
    items:
      type: string
    description: |
      List of subnet IDs in which to launch the broker. A `SINGLE_INSTANCE` deployment requires one subnet. An `ACTIVE_STANDBY_MULTI_AZ` deployment requires multiple subnets.
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      Map of tags to assign to the broker. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
  tagsAll:
    type: object
    additionalProperties:
      type: string
    description: |
      A map of tags assigned to the resource, including those inherited from the provider `default_tags` configuration block.
  users:
    type: array
    items:
      $ref: "#/types/aws:mq/BrokerUser:BrokerUser"
    description: |
      Configuration block for broker users. For `engine_type` of `RabbitMQ`, Amazon MQ does not return broker users preventing this resource from making user updates and drift detection. Detailed below.
required:
  - arn
  - authenticationStrategy
  - brokerName
  - configuration
  - engineType
  - engineVersion
  - hostInstanceType
  - instances
  - maintenanceWindowStartTime
  - storageType
  - subnetIds
  - tagsAll
  - users
inputProperties:
  applyImmediately:
    type: boolean
    description: |
      Specifies whether any broker modifications are applied immediately, or during the next maintenance window. Default is `false`.
  authenticationStrategy:
    type: string
    description: |
      Authentication strategy used to secure the broker. Valid values are `simple` and `ldap`. `ldap` is not supported for `engine_type` `RabbitMQ`.
  autoMinorVersionUpgrade:
    type: boolean
    description: |
      Whether to automatically upgrade to new minor versions of brokers as Amazon MQ makes releases available.
  brokerName:
    type: string
    description: |
      Name of the broker.
    willReplaceOnChanges: true
  configuration:
    $ref: "#/types/aws:mq/BrokerConfiguration:BrokerConfiguration"
    description: |
      Configuration block for broker configuration. Applies to `engine_type` of `ActiveMQ` only. Detailed below.
  deploymentMode:
    type: string
    description: |
      Deployment mode of the broker. Valid values are `SINGLE_INSTANCE`, `ACTIVE_STANDBY_MULTI_AZ`, and `CLUSTER_MULTI_AZ`. Default is `SINGLE_INSTANCE`.
    willReplaceOnChanges: true
  encryptionOptions:
    $ref: "#/types/aws:mq/BrokerEncryptionOptions:BrokerEncryptionOptions"
    description: |
      Configuration block containing encryption options. Detailed below.
    willReplaceOnChanges: true
  engineType:
    type: string
    description: |
      Type of broker engine. Valid values are `ActiveMQ` and `RabbitMQ`.
    willReplaceOnChanges: true
  engineVersion:
    type: string
    description: |
      Version of the broker engine. See the [AmazonMQ Broker Engine docs](https://docs.aws.amazon.com/amazon-mq/latest/developer-guide/broker-engine.html) for supported versions. For example, `5.15.0`.
  hostInstanceType:
    type: string
    description: |
      Broker's instance type. For example, `mq.t3.micro`, `mq.m5.large`.
  ldapServerMetadata:
    $ref: "#/types/aws:mq/BrokerLdapServerMetadata:BrokerLdapServerMetadata"
    description: |
      Configuration block for the LDAP server used to authenticate and authorize connections to the broker. Not supported for `engine_type` `RabbitMQ`. Detailed below. (Currently, AWS may not process changes to LDAP server metadata.)
    willReplaceOnChanges: true
  logs:
    $ref: "#/types/aws:mq/BrokerLogs:BrokerLogs"
    description: |
      Configuration block for the logging configuration of the broker. Detailed below.
  maintenanceWindowStartTime:
    $ref: "#/types/aws:mq/BrokerMaintenanceWindowStartTime:BrokerMaintenanceWindowStartTime"
    description: |
      Configuration block for the maintenance window start time. Detailed below.
  publiclyAccessible:
    type: boolean
    description: |
      Whether to enable connections from applications outside of the VPC that hosts the broker's subnets.
    willReplaceOnChanges: true
  securityGroups:
    type: array
    items:
      type: string
    description: |
      List of security group IDs assigned to the broker.
  storageType:
    type: string
    description: |
      Storage type of the broker. For `engine_type` `ActiveMQ`, the valid values are `efs` and `ebs`, and the AWS-default is `efs`. For `engine_type` `RabbitMQ`, only `ebs` is supported. When using `ebs`, only the `mq.m5` broker instance type family is supported.
  subnetIds:
    type: array
    items:
      type: string
    description: |
      List of subnet IDs in which to launch the broker. A `SINGLE_INSTANCE` deployment requires one subnet. An `ACTIVE_STANDBY_MULTI_AZ` deployment requires multiple subnets.
    willReplaceOnChanges: true
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      Map of tags to assign to the broker. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
  users:
    type: array
    items:
      $ref: "#/types/aws:mq/BrokerUser:BrokerUser"
    description: |
      Configuration block for broker users. For `engine_type` of `RabbitMQ`, Amazon MQ does not return broker users preventing this resource from making user updates and drift detection. Detailed below.
requiredInputs:
  - engineType
  - engineVersion
  - hostInstanceType
  - users
stateInputs:
  description: |
    Input properties used for looking up and filtering Broker resources.
  properties:
    applyImmediately:
      type: boolean
      description: |
        Specifies whether any broker modifications are applied immediately, or during the next maintenance window. Default is `false`.
    arn:
      type: string
      description: |
        ARN of the broker.
    authenticationStrategy:
      type: string
      description: |
        Authentication strategy used to secure the broker. Valid values are `simple` and `ldap`. `ldap` is not supported for `engine_type` `RabbitMQ`.
    autoMinorVersionUpgrade:
      type: boolean
      description: |
        Whether to automatically upgrade to new minor versions of brokers as Amazon MQ makes releases available.
    brokerName:
      type: string
      description: |
        Name of the broker.
      willReplaceOnChanges: true
    configuration:
      $ref: "#/types/aws:mq/BrokerConfiguration:BrokerConfiguration"
      description: |
        Configuration block for broker configuration. Applies to `engine_type` of `ActiveMQ` only. Detailed below.
    deploymentMode:
      type: string
      description: |
        Deployment mode of the broker. Valid values are `SINGLE_INSTANCE`, `ACTIVE_STANDBY_MULTI_AZ`, and `CLUSTER_MULTI_AZ`. Default is `SINGLE_INSTANCE`.
      willReplaceOnChanges: true
    encryptionOptions:
      $ref: "#/types/aws:mq/BrokerEncryptionOptions:BrokerEncryptionOptions"
      description: |
        Configuration block containing encryption options. Detailed below.
      willReplaceOnChanges: true
    engineType:
      type: string
      description: |
        Type of broker engine. Valid values are `ActiveMQ` and `RabbitMQ`.
      willReplaceOnChanges: true
    engineVersion:
      type: string
      description: |
        Version of the broker engine. See the [AmazonMQ Broker Engine docs](https://docs.aws.amazon.com/amazon-mq/latest/developer-guide/broker-engine.html) for supported versions. For example, `5.15.0`.
    hostInstanceType:
      type: string
      description: |
        Broker's instance type. For example, `mq.t3.micro`, `mq.m5.large`.
    instances:
      type: array
      items:
        $ref: "#/types/aws:mq/BrokerInstance:BrokerInstance"
      description: |
        List of information about allocated brokers (both active & standby).
        * `instances.0.console_url` - The URL of the broker's [ActiveMQ Web Console](http://activemq.apache.org/web-console.html).
        * `instances.0.ip_address` - IP Address of the broker.
        * `instances.0.endpoints` - Broker's wire-level protocol endpoints in the following order & format referenceable e.g., as `instances.0.endpoints.0` (SSL):
        * For `ActiveMQ`:
        * `ssl://broker-id.mq.us-west-2.amazonaws.com:61617`
        * `amqp+ssl://broker-id.mq.us-west-2.amazonaws.com:5671`
        * `stomp+ssl://broker-id.mq.us-west-2.amazonaws.com:61614`
        * `mqtt+ssl://broker-id.mq.us-west-2.amazonaws.com:8883`
        * `wss://broker-id.mq.us-west-2.amazonaws.com:61619`
        * For `RabbitMQ`:
        * `amqps://broker-id.mq.us-west-2.amazonaws.com:5671`
    ldapServerMetadata:
      $ref: "#/types/aws:mq/BrokerLdapServerMetadata:BrokerLdapServerMetadata"
      description: |
        Configuration block for the LDAP server used to authenticate and authorize connections to the broker. Not supported for `engine_type` `RabbitMQ`. Detailed below. (Currently, AWS may not process changes to LDAP server metadata.)
      willReplaceOnChanges: true
    logs:
      $ref: "#/types/aws:mq/BrokerLogs:BrokerLogs"
      description: |
        Configuration block for the logging configuration of the broker. Detailed below.
    maintenanceWindowStartTime:
      $ref: "#/types/aws:mq/BrokerMaintenanceWindowStartTime:BrokerMaintenanceWindowStartTime"
      description: |
        Configuration block for the maintenance window start time. Detailed below.
    publiclyAccessible:
      type: boolean
      description: |
        Whether to enable connections from applications outside of the VPC that hosts the broker's subnets.
      willReplaceOnChanges: true
    securityGroups:
      type: array
      items:
        type: string
      description: |
        List of security group IDs assigned to the broker.
    storageType:
      type: string
      description: |
        Storage type of the broker. For `engine_type` `ActiveMQ`, the valid values are `efs` and `ebs`, and the AWS-default is `efs`. For `engine_type` `RabbitMQ`, only `ebs` is supported. When using `ebs`, only the `mq.m5` broker instance type family is supported.
    subnetIds:
      type: array
      items:
        type: string
      description: |
        List of subnet IDs in which to launch the broker. A `SINGLE_INSTANCE` deployment requires one subnet. An `ACTIVE_STANDBY_MULTI_AZ` deployment requires multiple subnets.
      willReplaceOnChanges: true
    tags:
      type: object
      additionalProperties:
        type: string
      description: |
        Map of tags to assign to the broker. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
    tagsAll:
      type: object
      additionalProperties:
        type: string
      description: |
        A map of tags assigned to the resource, including those inherited from the provider `default_tags` configuration block.
    users:
      type: array
      items:
        $ref: "#/types/aws:mq/BrokerUser:BrokerUser"
      description: |
        Configuration block for broker users. For `engine_type` of `RabbitMQ`, Amazon MQ does not return broker users preventing this resource from making user updates and drift detection. Detailed below.
  type: object
