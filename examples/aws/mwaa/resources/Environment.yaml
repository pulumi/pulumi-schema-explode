$token: aws:mwaa/environment:Environment
properties:
  airflowConfigurationOptions:
    type: object
    additionalProperties:
      type: string
    description: |
      The `airflow_configuration_options` parameter specifies airflow override options. Check the [Official documentation](https://docs.aws.amazon.com/mwaa/latest/userguide/configuring-env-variables.html#configuring-env-variables-reference) for all possible configuration options.
  airflowVersion:
    type: string
    description: |
      Airflow version of your environment, will be set by default to the latest version that MWAA supports.
  arn:
    type: string
    description: |
      The ARN of the MWAA Environment
  createdAt:
    type: string
    description: |
      The Created At date of the MWAA Environment
      * `logging_configuration[0].<LOG_CONFIGURATION_TYPE>[0].cloud_watch_log_group_arn` - Provides the ARN for the CloudWatch group where the logs will be published
  dagS3Path:
    type: string
    description: |
      The relative path to the DAG folder on your Amazon S3 storage bucket. For example, dags. For more information, see [Importing DAGs on Amazon MWAA](https://docs.aws.amazon.com/mwaa/latest/userguide/configuring-dag-import.html).
  environmentClass:
    type: string
    description: |
      Environment class for the cluster. Possible options are `mw1.small`, `mw1.medium`, `mw1.large`. Will be set by default to `mw1.small`. Please check the [AWS Pricing](https://aws.amazon.com/de/managed-workflows-for-apache-airflow/pricing/) for more information about the environment classes.
  executionRoleArn:
    type: string
    description: |
      The Amazon Resource Name (ARN) of the task execution role that the Amazon MWAA and its environment can assume. Check the [official AWS documentation](https://docs.aws.amazon.com/mwaa/latest/userguide/mwaa-create-role.html) for the detailed role specification.
  kmsKey:
    type: string
    description: |
      The Amazon Resource Name (ARN) of your KMS key that you want to use for encryption. Will be set to the ARN of the managed KMS key `aws/airflow` by default. Please check the [Official Documentation](https://docs.aws.amazon.com/mwaa/latest/userguide/custom-keys-certs.html) for more information.
  lastUpdateds:
    type: array
    items:
      $ref: "#/types/aws:mwaa/EnvironmentLastUpdated:EnvironmentLastUpdated"
  loggingConfiguration:
    $ref: "#/types/aws:mwaa/EnvironmentLoggingConfiguration:EnvironmentLoggingConfiguration"
    description: |
      The Apache Airflow logs you want to send to Amazon CloudWatch Logs.
  maxWorkers:
    type: integer
    description: |
      The maximum number of workers that can be automatically scaled up. Value need to be between `1` and `25`. Will be `10` by default.
  minWorkers:
    type: integer
    description: |
      The minimum number of workers that you want to run in your environment. Will be `1` by default.
  name:
    type: string
    description: |
      The name of the Apache Airflow Environment
  networkConfiguration:
    $ref: "#/types/aws:mwaa/EnvironmentNetworkConfiguration:EnvironmentNetworkConfiguration"
    description: |
      Specifies the network configuration for your Apache Airflow Environment. This includes two private subnets as well as security groups for the Airflow environment. Each subnet requires internet connection, otherwise the deployment will fail. See Network configuration below for details.
  pluginsS3ObjectVersion:
    type: string
    description: |
      The plugins.zip file version you want to use.
  pluginsS3Path:
    type: string
    description: |
      The relative path to the plugins.zip file on your Amazon S3 storage bucket. For example, plugins.zip. If a relative path is provided in the request, then plugins_s3_object_version is required. For more information, see [Importing DAGs on Amazon MWAA](https://docs.aws.amazon.com/mwaa/latest/userguide/configuring-dag-import.html).
  requirementsS3ObjectVersion:
    type: string
    description: |
      The requirements.txt file version you want to use.
  requirementsS3Path:
    type: string
    description: |
      The relative path to the requirements.txt file on your Amazon S3 storage bucket. For example, requirements.txt. If a relative path is provided in the request, then requirements_s3_object_version is required. For more information, see [Importing DAGs on Amazon MWAA](https://docs.aws.amazon.com/mwaa/latest/userguide/configuring-dag-import.html).
  schedulers:
    type: integer
    description: |
      The number of schedulers that you want to run in your environment. v2.0.2 and above accepts `2` - `5`, default `2`. v1.10.12 accepts `1`.
  serviceRoleArn:
    type: string
    description: |
      The Service Role ARN of the Amazon MWAA Environment
  sourceBucketArn:
    type: string
    description: |
      The Amazon Resource Name (ARN) of your Amazon S3 storage bucket. For example, arn:aws:s3:::airflow-mybucketname.
  status:
    type: string
    description: |
      The status of the Amazon MWAA Environment
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      A map of resource tags to associate with the resource. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
  tagsAll:
    type: object
    additionalProperties:
      type: string
    description: |
      A map of tags assigned to the resource, including those inherited from the provider `default_tags` configuration block.
  webserverAccessMode:
    type: string
    description: |
      Specifies whether the webserver should be accessible over the internet or via your specified VPC. Possible options: `PRIVATE_ONLY` (default) and `PUBLIC_ONLY`.
  webserverUrl:
    type: string
    description: |
      The webserver URL of the MWAA Environment
  weeklyMaintenanceWindowStart:
    type: string
    description: |
      Specifies the start date for the weekly maintenance window.
required:
  - airflowVersion
  - arn
  - createdAt
  - dagS3Path
  - environmentClass
  - executionRoleArn
  - lastUpdateds
  - loggingConfiguration
  - maxWorkers
  - minWorkers
  - name
  - networkConfiguration
  - pluginsS3ObjectVersion
  - requirementsS3ObjectVersion
  - schedulers
  - serviceRoleArn
  - sourceBucketArn
  - status
  - tagsAll
  - webserverAccessMode
  - webserverUrl
  - weeklyMaintenanceWindowStart
inputProperties:
  airflowConfigurationOptions:
    type: object
    additionalProperties:
      type: string
    description: |
      The `airflow_configuration_options` parameter specifies airflow override options. Check the [Official documentation](https://docs.aws.amazon.com/mwaa/latest/userguide/configuring-env-variables.html#configuring-env-variables-reference) for all possible configuration options.
  airflowVersion:
    type: string
    description: |
      Airflow version of your environment, will be set by default to the latest version that MWAA supports.
  dagS3Path:
    type: string
    description: |
      The relative path to the DAG folder on your Amazon S3 storage bucket. For example, dags. For more information, see [Importing DAGs on Amazon MWAA](https://docs.aws.amazon.com/mwaa/latest/userguide/configuring-dag-import.html).
  environmentClass:
    type: string
    description: |
      Environment class for the cluster. Possible options are `mw1.small`, `mw1.medium`, `mw1.large`. Will be set by default to `mw1.small`. Please check the [AWS Pricing](https://aws.amazon.com/de/managed-workflows-for-apache-airflow/pricing/) for more information about the environment classes.
  executionRoleArn:
    type: string
    description: |
      The Amazon Resource Name (ARN) of the task execution role that the Amazon MWAA and its environment can assume. Check the [official AWS documentation](https://docs.aws.amazon.com/mwaa/latest/userguide/mwaa-create-role.html) for the detailed role specification.
  kmsKey:
    type: string
    description: |
      The Amazon Resource Name (ARN) of your KMS key that you want to use for encryption. Will be set to the ARN of the managed KMS key `aws/airflow` by default. Please check the [Official Documentation](https://docs.aws.amazon.com/mwaa/latest/userguide/custom-keys-certs.html) for more information.
    willReplaceOnChanges: true
  loggingConfiguration:
    $ref: "#/types/aws:mwaa/EnvironmentLoggingConfiguration:EnvironmentLoggingConfiguration"
    description: |
      The Apache Airflow logs you want to send to Amazon CloudWatch Logs.
  maxWorkers:
    type: integer
    description: |
      The maximum number of workers that can be automatically scaled up. Value need to be between `1` and `25`. Will be `10` by default.
  minWorkers:
    type: integer
    description: |
      The minimum number of workers that you want to run in your environment. Will be `1` by default.
  name:
    type: string
    description: |
      The name of the Apache Airflow Environment
    willReplaceOnChanges: true
  networkConfiguration:
    $ref: "#/types/aws:mwaa/EnvironmentNetworkConfiguration:EnvironmentNetworkConfiguration"
    description: |
      Specifies the network configuration for your Apache Airflow Environment. This includes two private subnets as well as security groups for the Airflow environment. Each subnet requires internet connection, otherwise the deployment will fail. See Network configuration below for details.
  pluginsS3ObjectVersion:
    type: string
    description: |
      The plugins.zip file version you want to use.
  pluginsS3Path:
    type: string
    description: |
      The relative path to the plugins.zip file on your Amazon S3 storage bucket. For example, plugins.zip. If a relative path is provided in the request, then plugins_s3_object_version is required. For more information, see [Importing DAGs on Amazon MWAA](https://docs.aws.amazon.com/mwaa/latest/userguide/configuring-dag-import.html).
  requirementsS3ObjectVersion:
    type: string
    description: |
      The requirements.txt file version you want to use.
  requirementsS3Path:
    type: string
    description: |
      The relative path to the requirements.txt file on your Amazon S3 storage bucket. For example, requirements.txt. If a relative path is provided in the request, then requirements_s3_object_version is required. For more information, see [Importing DAGs on Amazon MWAA](https://docs.aws.amazon.com/mwaa/latest/userguide/configuring-dag-import.html).
  schedulers:
    type: integer
    description: |
      The number of schedulers that you want to run in your environment. v2.0.2 and above accepts `2` - `5`, default `2`. v1.10.12 accepts `1`.
  sourceBucketArn:
    type: string
    description: |
      The Amazon Resource Name (ARN) of your Amazon S3 storage bucket. For example, arn:aws:s3:::airflow-mybucketname.
  tags:
    type: object
    additionalProperties:
      type: string
    description: |
      A map of resource tags to associate with the resource. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
  webserverAccessMode:
    type: string
    description: |
      Specifies whether the webserver should be accessible over the internet or via your specified VPC. Possible options: `PRIVATE_ONLY` (default) and `PUBLIC_ONLY`.
  weeklyMaintenanceWindowStart:
    type: string
    description: |
      Specifies the start date for the weekly maintenance window.
requiredInputs:
  - dagS3Path
  - executionRoleArn
  - networkConfiguration
  - sourceBucketArn
stateInputs:
  description: |
    Input properties used for looking up and filtering Environment resources.
  properties:
    airflowConfigurationOptions:
      type: object
      additionalProperties:
        type: string
      description: |
        The `airflow_configuration_options` parameter specifies airflow override options. Check the [Official documentation](https://docs.aws.amazon.com/mwaa/latest/userguide/configuring-env-variables.html#configuring-env-variables-reference) for all possible configuration options.
    airflowVersion:
      type: string
      description: |
        Airflow version of your environment, will be set by default to the latest version that MWAA supports.
    arn:
      type: string
      description: |
        The ARN of the MWAA Environment
    createdAt:
      type: string
      description: |
        The Created At date of the MWAA Environment
        * `logging_configuration[0].<LOG_CONFIGURATION_TYPE>[0].cloud_watch_log_group_arn` - Provides the ARN for the CloudWatch group where the logs will be published
    dagS3Path:
      type: string
      description: |
        The relative path to the DAG folder on your Amazon S3 storage bucket. For example, dags. For more information, see [Importing DAGs on Amazon MWAA](https://docs.aws.amazon.com/mwaa/latest/userguide/configuring-dag-import.html).
    environmentClass:
      type: string
      description: |
        Environment class for the cluster. Possible options are `mw1.small`, `mw1.medium`, `mw1.large`. Will be set by default to `mw1.small`. Please check the [AWS Pricing](https://aws.amazon.com/de/managed-workflows-for-apache-airflow/pricing/) for more information about the environment classes.
    executionRoleArn:
      type: string
      description: |
        The Amazon Resource Name (ARN) of the task execution role that the Amazon MWAA and its environment can assume. Check the [official AWS documentation](https://docs.aws.amazon.com/mwaa/latest/userguide/mwaa-create-role.html) for the detailed role specification.
    kmsKey:
      type: string
      description: |
        The Amazon Resource Name (ARN) of your KMS key that you want to use for encryption. Will be set to the ARN of the managed KMS key `aws/airflow` by default. Please check the [Official Documentation](https://docs.aws.amazon.com/mwaa/latest/userguide/custom-keys-certs.html) for more information.
      willReplaceOnChanges: true
    lastUpdateds:
      type: array
      items:
        $ref: "#/types/aws:mwaa/EnvironmentLastUpdated:EnvironmentLastUpdated"
    loggingConfiguration:
      $ref: "#/types/aws:mwaa/EnvironmentLoggingConfiguration:EnvironmentLoggingConfiguration"
      description: |
        The Apache Airflow logs you want to send to Amazon CloudWatch Logs.
    maxWorkers:
      type: integer
      description: |
        The maximum number of workers that can be automatically scaled up. Value need to be between `1` and `25`. Will be `10` by default.
    minWorkers:
      type: integer
      description: |
        The minimum number of workers that you want to run in your environment. Will be `1` by default.
    name:
      type: string
      description: |
        The name of the Apache Airflow Environment
      willReplaceOnChanges: true
    networkConfiguration:
      $ref: "#/types/aws:mwaa/EnvironmentNetworkConfiguration:EnvironmentNetworkConfiguration"
      description: |
        Specifies the network configuration for your Apache Airflow Environment. This includes two private subnets as well as security groups for the Airflow environment. Each subnet requires internet connection, otherwise the deployment will fail. See Network configuration below for details.
    pluginsS3ObjectVersion:
      type: string
      description: |
        The plugins.zip file version you want to use.
    pluginsS3Path:
      type: string
      description: |
        The relative path to the plugins.zip file on your Amazon S3 storage bucket. For example, plugins.zip. If a relative path is provided in the request, then plugins_s3_object_version is required. For more information, see [Importing DAGs on Amazon MWAA](https://docs.aws.amazon.com/mwaa/latest/userguide/configuring-dag-import.html).
    requirementsS3ObjectVersion:
      type: string
      description: |
        The requirements.txt file version you want to use.
    requirementsS3Path:
      type: string
      description: |
        The relative path to the requirements.txt file on your Amazon S3 storage bucket. For example, requirements.txt. If a relative path is provided in the request, then requirements_s3_object_version is required. For more information, see [Importing DAGs on Amazon MWAA](https://docs.aws.amazon.com/mwaa/latest/userguide/configuring-dag-import.html).
    schedulers:
      type: integer
      description: |
        The number of schedulers that you want to run in your environment. v2.0.2 and above accepts `2` - `5`, default `2`. v1.10.12 accepts `1`.
    serviceRoleArn:
      type: string
      description: |
        The Service Role ARN of the Amazon MWAA Environment
    sourceBucketArn:
      type: string
      description: |
        The Amazon Resource Name (ARN) of your Amazon S3 storage bucket. For example, arn:aws:s3:::airflow-mybucketname.
    status:
      type: string
      description: |
        The status of the Amazon MWAA Environment
    tags:
      type: object
      additionalProperties:
        type: string
      description: |
        A map of resource tags to associate with the resource. If configured with a provider `default_tags` configuration block present, tags with matching keys will overwrite those defined at the provider-level.
    tagsAll:
      type: object
      additionalProperties:
        type: string
      description: |
        A map of tags assigned to the resource, including those inherited from the provider `default_tags` configuration block.
    webserverAccessMode:
      type: string
      description: |
        Specifies whether the webserver should be accessible over the internet or via your specified VPC. Possible options: `PRIVATE_ONLY` (default) and `PUBLIC_ONLY`.
    webserverUrl:
      type: string
      description: |
        The webserver URL of the MWAA Environment
    weeklyMaintenanceWindowStart:
      type: string
      description: |
        Specifies the start date for the weekly maintenance window.
  type: object
